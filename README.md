# ğŸ• Monitor de Emociones Caninas con IA

Sistema inteligente para detectar y monitorear el estado emocional de perros usando visiÃ³n por computadora, anÃ¡lisis en tiempo real y control completo vÃ­a Telegram con **sistema multiusuario por PC**.

## âœ¨ CaracterÃ­sticas Principales

### ğŸ¯ **DetecciÃ³n Inteligente**
- **YOLOv8** para detecciÃ³n precisa de perros
- **Red neuronal personalizada** (83% precisiÃ³n) para anÃ¡lisis emocional
- **AnÃ¡lisis en tiempo real** con ventana visual interactiva
- **Procesamiento de videos** con estadÃ­sticas completas

### ğŸ¤– **Bot de Telegram Avanzado**
- **Sistema multiusuario por PC** - cada PC tiene su cÃ³digo Ãºnico
- **Control remoto completo** - anÃ¡lisis, pausa, captura de frames
- **NavegaciÃ³n intuitiva** con menÃºs contextuales
- **DesconexiÃ³n segura** - control total de sesiones

### ğŸ–¥ï¸ **Sistema Multiusuario por PC**
- âœ… **CÃ³digo Ãºnico por PC** - cada computadora genera su cÃ³digo especÃ­fico
- âœ… **Seguridad por autorizaciÃ³n** - solo usuarios con cÃ³digo pueden acceder
- âœ… **DesconexiÃ³n controlada** - usuarios pueden desconectarse cuando deseen
- âœ… **Escalabilidad total** - sin lÃ­mite de PCs o usuarios

### ğŸ¥ **AnÃ¡lisis Dual**
- **Tiempo Real**: Ventana en vivo con detecciones superpuestas
- **Videos**: Subida directa desde Telegram con reporte completo
- **Advertencias inteligentes** - notifica antes de cambiar modos
- **Control hÃ­brido** - teclado + Telegram simultÃ¡neamente

## ğŸ” Sistema Multiusuario - CÃ³mo Funciona

### **1. InstalaciÃ³n en Nueva PC**
```bash
# Clonar o descargar proyecto
git clone [repositorio]
cd ProyectoIA-EmocionesPerros

# Instalar dependencias  
pip install -r requirements.txt

# Ejecutar por primera vez
python main.py
```

### **2. CÃ³digo Ãšnico AutomÃ¡tico**
Al ejecutar `python main.py`, el sistema:
- ğŸ–¥ï¸ **Detecta automÃ¡ticamente** el nombre de la PC
- ğŸ”‘ **Genera cÃ³digo Ãºnico** formato: `PCNA-1234-ABCD`
- ğŸ¨ **Muestra cÃ³digo colorido** en consola para fÃ¡cil identificaciÃ³n
- ğŸ“± **EnvÃ­a mensaje de bienvenida** explicando proceso de conexiÃ³n

### **3. ConexiÃ³n desde Telegram**
```
1. Usuario abre Telegram
2. Busca el bot @Emocionesperrunasbot  
3. EnvÃ­a /start
4. Copia cÃ³digo de la PC e ingresa
5. Â¡Acceso autorizado!
```

### **4. Ejemplos de CÃ³digos por PC**
- PC "LAPTOP-CASA" â†’ CÃ³digo: `LAPT-5678-WXYZ`
- PC "OFICINA-01" â†’ CÃ³digo: `OFIC-9012-QRST`  
- PC "GAMING-PC" â†’ CÃ³digo: `GAMI-3456-MNOP`

## ğŸš€ InstalaciÃ³n RÃ¡pida

### **MÃ©todo 1: Archivo Ejecutable (Recomendado)**

1. **Descarga** el proyecto como ZIP
2. **Extrae** en tu carpeta deseada
3. **Doble clic** en `ejecutar.bat`
4. **Copia el cÃ³digo colorido** que aparece en pantalla
5. **Abre Telegram** â†’ busca `@Emocionesperrunasbot`
6. **EnvÃ­a** `/start` y luego tu cÃ³digo
7. **Â¡Listo!** Ya puedes usar todas las funciones

### **MÃ©todo 2: InstalaciÃ³n Manual**

```cmd
# 1. Crear entorno virtual
python -m venv .venv

# 2. Activar entorno
.venv\Scripts\activate

# 3. Instalar dependencias
pip install -r requirements.txt

# 4. Ejecutar aplicaciÃ³n
python main.py
```

## ğŸ›ï¸ Funciones del Bot de Telegram

### **ğŸ“‹ MenÃº Principal**
- **ğŸ“¹ AnÃ¡lisis en Tiempo Real** - Inicia cÃ¡mara con ventana visual
- **ğŸ¬ Analizar Video** - Sube videos para anÃ¡lisis completo  
- **ğŸ“Š Estado Actual** - InformaciÃ³n del sistema en tiempo real
- **ğŸ“ˆ Resumen del DÃ­a** - EstadÃ­sticas acumuladas
- **ğŸ”” Activar/Pausar Monitoreo** - Alertas automÃ¡ticas
- **ğŸ’¡ Consejos Generales** - Recomendaciones por emociÃ³n
- **ğŸšª Desconectar de PC** - Cerrar sesiÃ³n segura
- **â“ Ayuda** - GuÃ­a completa de uso

### **ğŸ¥ AnÃ¡lisis en Tiempo Real**
- **â–¶ï¸ Iniciar** - Abre ventana visual en PC
- **â¸ï¸ Pausar/Reanudar** - Control remoto del anÃ¡lisis  
- **â¹ï¸ Detener** - Finaliza anÃ¡lisis con resumen
- **ğŸ“¸ Capturar Frame** - Foto instantÃ¡nea con anÃ¡lisis
- **ğŸ¬ Cambiar a Video** - Advertencia antes de cambiar modo

### **ğŸ¬ AnÃ¡lisis de Videos**
- **Formatos soportados**: MP4, AVI, MOV
- **TamaÃ±o mÃ¡ximo**: 20MB
- **DuraciÃ³n mÃ¡xima**: 2 minutos  
- **Procesamiento automÃ¡tico** con video de salida
- **Reporte completo** con estadÃ­sticas y recomendaciones

## ğŸ”’ Seguridad y Privacidad

### **ğŸ” Sistema de AutorizaciÃ³n**
- **CÃ³digo por PC**: Cada computadora tiene cÃ³digo Ãºnico
- **AutorizaciÃ³n obligatoria**: `/start` + cÃ³digo requerido
- **DesconexiÃ³n segura**: BotÃ³n para cerrar sesiÃ³n
- **Sin lÃ­mites**: MÃºltiples usuarios por PC, mÃºltiples PCs

### **ğŸšª Control de SesiÃ³n**
```
Usuario â†’ "Desconectar de PC"
Bot â†’ "âš ï¸ Te desconectarÃ¡s de [PC-NAME]. Â¿Confirmar?"
Usuario â†’ "SÃ­, desconectar"  
Bot â†’ "âœ… Desconectado. Usa /start + cÃ³digo para reconectar"
```

### **âš ï¸ Advertencias Inteligentes**
```
Usuario â†’ "Analizar Video" (con tiempo real activo)
Bot â†’ "âš ï¸ AnÃ¡lisis en tiempo real activo. Â¿Pausar y continuar?"
Usuario â†’ "SÃ­, pausar y analizar video"
Bot â†’ "â¸ï¸ Pausado. Ahora envÃ­a tu video"
```

## ğŸ¯ Casos de Uso

### **ğŸ  Uso DomÃ©stico**
- PC principal con cÃ³digo compartido entre familia
- Laptop personal con cÃ³digo privado para uso individual
- Monitoreo remoto de mascotas durante el dÃ­a

### **ğŸ¢ Uso Profesional**
- **Veterinarias**: PC de recepciÃ³n + PC del veterinario
- **Centros de entrenamiento**: MÃºltiples estaciones independientes
- **Refugios**: Monitoreo de mÃºltiples Ã¡reas simultÃ¡neamente

### **ğŸ“ Uso Educativo/InvestigaciÃ³n**
- Laboratorios con mÃºltiples PCs de anÃ¡lisis
- Proyectos de investigaciÃ³n con datos independientes
- Demostraciones en clase con control granular

## ğŸ“Š AnÃ¡lisis y Reportes

### **ğŸ“ˆ EstadÃ­sticas en Tiempo Real**
- **Emociones detectadas**: Happy, Sad, Angry, Relaxed
- **Confianza promedio**: PrecisiÃ³n de las detecciones
- **Tiempo de anÃ¡lisis**: DuraciÃ³n total del monitoreo
- **Frames procesados**: Cantidad de imÃ¡genes analizadas

### **ğŸ“‹ Reportes de Video**
```
ğŸ¬ ANÃLISIS DE VIDEO COMPLETADO

ğŸ“ Video: ejemplo.mp4
ğŸ” Detecciones totales: 156
ğŸ¯ EmociÃ³n dominante: HAPPY (65.4%)

ğŸ“Š DistribuciÃ³n:
ğŸ˜Š HAPPY: 102 (65.4%)
ğŸ˜Œ RELAXED: 32 (20.5%)  
ğŸ˜¢ SAD: 15 (9.6%)
ğŸ˜  ANGRY: 7 (4.5%)

âš¡ Confianza promedio: 87.3%
â±ï¸ DuraciÃ³n: 45 segundos
```

### **ğŸ’¡ Recomendaciones AutomÃ¡ticas**
- **ğŸ˜Š Happy**: ContinÃºa con actividades que lo hacen feliz
- **ğŸ˜Œ Relaxed**: Estado ideal, mantÃ©n el ambiente tranquilo  
- **ğŸ˜¢ Sad**: DedÃ­cale tiempo y verifica si estÃ¡ enfermo
- **ğŸ˜  Angry**: Revisa ruidos fuertes, dale espacio tranquilo

## ğŸ› ï¸ Estructura del Proyecto

```
ProyectoIA-EmocionesPerros/
â”œâ”€â”€ ğŸ“ utils/                    # MÃ³dulos principales
â”‚   â”œâ”€â”€ telegram_utils.py        # Bot de Telegram completo
â”‚   â”œâ”€â”€ cam_utils.py            # AnÃ¡lisis de emociones
â”‚   â””â”€â”€ yolo_dog_detector.py    # DetecciÃ³n de perros
â”œâ”€â”€ ğŸ“ modelo/                   # Red neuronal entrenada
â”‚   â””â”€â”€ mejor_modelo_83.h5      # Modelo 83% precisiÃ³n
â”œâ”€â”€ ğŸ“ media/                   # Videos de prueba
â”œâ”€â”€ main.py                     # AplicaciÃ³n principal
â”œâ”€â”€ procesar_video.py          # Procesador de videos
â”œâ”€â”€ ejecutar.bat               # Ejecutable principal
â”œâ”€â”€ ejecutar_video.bat         # Ejecutable para videos
â””â”€â”€ requirements.txt           # Dependencias
```

## ğŸš¨ SoluciÃ³n de Problemas

### **âŒ "Error inicializando Telegram"**
**SoluciÃ³n**: Revisa conexiÃ³n a internet y reinicia la aplicaciÃ³n

### **âŒ "CÃ¡mara no encontrada"**  
**SoluciÃ³n**: 
- Verifica que la cÃ¡mara estÃ© conectada
- Cierra otras aplicaciones que usen la cÃ¡mara
- Reinicia la aplicaciÃ³n

### **âŒ "CÃ³digo incorrecto"**
**SoluciÃ³n**:
- Verifica que copiaste el cÃ³digo completo sin espacios
- AsegÃºrate de usar el cÃ³digo de la PC correcta
- Si reiniciaste la app, se genera un cÃ³digo nuevo

### **ğŸ”„ Reiniciar Sistema**
Si hay problemas, simplemente:
1. Cierra la aplicaciÃ³n (Ctrl+C o cerrar ventana)
2. Ejecuta nuevamente `ejecutar.bat` o `python main.py`
3. Se generarÃ¡ un nuevo cÃ³digo de conexiÃ³n

## ğŸ’¡ Consejos de Uso

### **ğŸ¯ Para Mejores Resultados**
- **IluminaciÃ³n adecuada**: Evita contraluces y sombras fuertes
- **Perro visible**: AsegÃºrate de que la cara del perro sea visible  
- **Distancia Ã³ptima**: 1-3 metros de la cÃ¡mara
- **Estabilidad**: MantÃ©n la cÃ¡mara fija durante anÃ¡lisis

### **ğŸ“± Uso del Bot**
- **Mensajes claros**: El bot responde a botones, no a texto libre
- **Una funciÃ³n a la vez**: Termina un anÃ¡lisis antes de iniciar otro
- **DesconexiÃ³n segura**: Usa el botÃ³n "Desconectar" antes de cerrar
- **CÃ³digos Ãºnicos**: Cada PC necesita su propio cÃ³digo

## ğŸ‰ CaracterÃ­sticas Avanzadas

### **ğŸ”„ AnÃ¡lisis HÃ­brido**
- Control simultÃ¡neo desde PC (teclado) y Telegram
- Cambio fluido entre modos de anÃ¡lisis
- Advertencias antes de cambiar estados

### **ğŸ“¸ Captura Remota**
- Toma fotos instantÃ¡neas desde Telegram
- AnÃ¡lisis inmediato de la foto capturada
- EnvÃ­o automÃ¡tico del resultado

### **ğŸ¨ Interfaz Visual Rica**
- Ventana en tiempo real con colores por emociÃ³n
- CÃ³digos de conexiÃ³n con formato colorido y llamativo
- Mensajes de Telegram con emojis y formato Markdown

### **ğŸ” Seguridad Robusta**
- Sistema de autorizaciÃ³n por PC
- DesconexiÃ³n controlada por usuario
- CÃ³digos Ãºnicos regenerables

---

## ğŸ“ InformaciÃ³n del Proyecto

**Desarrollado para**: AnÃ¡lisis de bienestar animal usando IA  
**TecnologÃ­as**: Python, OpenCV, TensorFlow, YOLOv8, Telegram Bot API  
**PrecisiÃ³n del modelo**: 83% en detecciÃ³n de emociones caninas  
**Compatibilidad**: Windows 10/11, Python 3.8+

---

Â¡Tu compaÃ±ero inteligente para el cuidado y bienestar de tu mascota! ğŸ•â¤ï¸
- âœ… Un mensaje de prueba en tu bot de Telegram
- âœ… Logs exitosos en la terminal

## ğŸ® CÃ³mo Usar la AplicaciÃ³n

### MÃ©todo Principal: Bot de Telegram (Recomendado)

1. **Ejecutar el sistema**:
   ```cmd
   python main.py
   ```
   O doble clic en `ejecutar.bat`

2. **En Telegram**, envÃ­a `/start` al bot @Emocionesperrunasbot

3. **Usa el menÃº interactivo**:
   - ğŸ“¹ **Analizar Video** - Sube un video y recibe anÃ¡lisis completo
   - ğŸ¥ **AnÃ¡lisis en Tiempo Real** - Activa la cÃ¡mara con ventana visual
   - ğŸ  **Regresar al MenÃº** - Disponible en todas las funciones

### Funcionalidades del Bot

#### ğŸ“¹ **AnÃ¡lisis de Videos**
- Sube videos directamente al chat (MP4, AVI, MOV)
- Recibe estadÃ­sticas completas: emociones detectadas, confianza, distribuciÃ³n
- Descarga el video procesado con detecciones marcadas

#### ğŸ¥ **AnÃ¡lisis en Tiempo Real**
- Se abre una ventana en tu PC mostrando la cÃ¡mara
- Detecciones de perros con bounding boxes verdes
- Emociones superpuestas con colores (Verde=feliz, Rojo=triste/enojado)
- **Control por teclado**: Q (pausar), ESC (detener)
- **Control desde Telegram**: Botones de pausa/reanudaciÃ³n/detener

#### ğŸ‘¥ **Sistema Multiusuario**
- Cada usuario tiene su sesiÃ³n independiente
- No interfiere con otros usuarios del mismo bot
- GestiÃ³n automÃ¡tica de recursos por usuario

### MÃ©todo Alternativo: Solo Consola

Si prefieres usar solo la consola sin Telegram:

```cmd
python main.py
# Selecciona opciÃ³n 2: "CÃ¡mara en tiempo real desde consola"
# O opciÃ³n 3: "Procesar archivo de video desde consola"
```

## ğŸ¤– Bot de Telegram - Comandos y Funciones

### Comandos Principales

| Comando | DescripciÃ³n |
|---------|-------------|
| `/start` | Inicializar el bot y mostrar menÃº principal |
| `/menu` | Mostrar menÃº interactivo con todas las opciones |

### MenÃº Interactivo Completo

#### ğŸ“Š **AnÃ¡lisis y Monitoreo**
- ğŸ“¹ **Analizar Video** - Sube videos para anÃ¡lisis completo con estadÃ­sticas
- ğŸ¥ **AnÃ¡lisis en Tiempo Real** - Activa cÃ¡mara con ventana visual en PC
- ï¿½ **Ver EstadÃ­sticas** - Resumen de anÃ¡lisis realizados

#### ğŸ® **Controles de Tiempo Real**
- â¸ï¸ **Pausar** - Pausa el anÃ¡lisis en tiempo real manteniendo la sesiÃ³n
- â–¶ï¸ **Reanudar** - ContinÃºa el anÃ¡lisis pausado
- â¹ï¸ **Detener** - Termina completamente el anÃ¡lisis y libera recursos

#### ğŸ”” **GestiÃ³n de Alertas**
- ğŸ”” **Activar Monitoreo** - Habilita alertas automÃ¡ticas por emociones
- ï¿½ **Pausar Monitoreo** - Desactiva alertas temporalmente
- âš™ï¸ **Configurar Alertas** - Ajusta sensibilidad y tipos de alertas

#### ğŸ› ï¸ **Utilidades**
- ğŸ  **Regresar al MenÃº** - Disponible en todas las funciones para navegaciÃ³n fÃ¡cil
- ğŸ§¹ **Limpiar Chat** - Elimina mensajes del bot para mantener el chat limpio
- â“ **Ayuda** - InformaciÃ³n detallada de comandos y funciones

### Alertas AutomÃ¡ticas Mejoradas

El sistema envÃ­a notificaciones inteligentes cuando detecta:

- ğŸš¨ **Emociones negativas** (tristeza, enojo) con alta confianza
- ğŸ“Š **Patrones de comportamiento** preocupantes
- ğŸ¯ **AnÃ¡lisis detallado** con nivel de confianza y recomendaciones
- ğŸ“¸ **Capturas automÃ¡ticas** del momento de la detecciÃ³n

## ğŸ¤– Bot de Telegram Preconfigurado

**Bot oficial**: [@Emocionesperrunasbot](https://t.me/Emocionesperrunasbot)

- âœ… **Ya configurado** y listo para usar
- âœ… **Token incluido** en el cÃ³digo
- âœ… **Solo necesitas** configurar tu Chat ID
- âœ… **Funciones completas** de monitoreo y alertas

## ğŸ”§ ConfiguraciÃ³n Avanzada

### Ajustar Sensibilidad de DetecciÃ³n

En `main.py`, puedes modificar:

```python
# Umbral de confianza para detecciÃ³n de emociones (0.0 - 1.0)
CONFIDENCE_THRESHOLD = 0.7  # MÃ¡s alto = mÃ¡s estricto

# Frecuencia de anÃ¡lisis (frames entre anÃ¡lisis)
ANALYSIS_INTERVAL = 30  # MÃ¡s alto = menos frecuente

# NÃºmero de detecciones consecutivas para activar alerta
ALERT_THRESHOLD = 3  # MÃ¡s alto = menos alertas
```

### Configurar CÃ¡mara

Por defecto usa la cÃ¡mara 0. Para cambiar:

```python
# En main.py, lÃ­nea de inicializaciÃ³n de cÃ¡mara
cap = cv2.VideoCapture(1)  # Cambiar 0 por el nÃºmero de tu cÃ¡mara
```

## ğŸ” SoluciÃ³n de Problemas

### âŒ "No se reconoce 'python'"
**SoluciÃ³n**: Instala Python desde [python.org](https://python.org) y asegÃºrate de marcar "Add to PATH"

### âŒ "No se encuentra la cÃ¡mara"
**SoluciÃ³n**:
- Verifica que tu cÃ¡mara estÃ© conectada
- Prueba cambiar el nÃºmero de cÃ¡mara en `main.py`
- Otorga permisos de cÃ¡mara a Python

### âŒ "Error de Telegram: Unauthorized"
**SoluciÃ³n**:
- Verifica que el TOKEN sea correcto
- AsegÃºrate de haber enviado `/start` al bot
- Confirma que el Chat ID estÃ© en la lista de usuarios

### âŒ "No detecta al perro"
**SoluciÃ³n**:
- AsegÃºrate de que haya buena iluminaciÃ³n
- El perro debe estar visible en la cÃ¡mara
- Ajusta el umbral de confianza mÃ¡s bajo

### âŒ "No recibo alertas"
**SoluciÃ³n**:
- Verifica que el monitoreo estÃ© activo (`/menu` â†’ "Activar Monitoreo")
- Revisa que las notificaciones de Telegram estÃ©n habilitadas
- Confirma que el sistema estÃ© detectando emociones

## ğŸ“ Notas Importantes

- âš¡ **Rendimiento**: Sistema optimizado para anÃ¡lisis en tiempo real
- ğŸ’¾ **Almacenamiento**: Videos procesados se guardan automÃ¡ticamente
- ğŸ”‹ **Recursos**: Uso moderado de CPU/RAM, optimizado para laptops
- ğŸŒ **Internet**: Solo requiere conexiÃ³n para Telegram
- ğŸ• **Compatibilidad**: Entrenado especÃ­ficamente para perros domÃ©sticos
- ğŸ¯ **PrecisiÃ³n**: 83% de accuracy en detecciÃ³n emocional

## ğŸ† Rendimiento del Sistema

- **DetecciÃ³n de perros**: YOLOv8 con 95%+ precisiÃ³n
- **ClasificaciÃ³n emocional**: Modelo custom con 83% accuracy
- **Velocidad**: 15-30 FPS en tiempo real
- **Latencia Telegram**: <2 segundos respuesta promedio
- **Memoria RAM**: ~500MB durante operaciÃ³n

## ğŸ› ï¸ TecnologÃ­as Utilizadas

- **Computer Vision**: OpenCV + YOLOv8
- **Deep Learning**: TensorFlow/Keras
- **Bot Framework**: python-telegram-bot
- **Interfaz**: Tkinter + CV2 GUI
- **Procesamiento**: NumPy + PIL

---

**Desarrollado con â¤ï¸ para el bienestar canino**

*Sistema completo de monitoreo emocional con tecnologÃ­a de punta*

1. **Revisa los logs** en la terminal para errores especÃ­ficos
2. **Verifica la configuraciÃ³n** de Telegram (Token y Chat ID)
3. **Prueba la cÃ¡mara** independientemente
4. **Consulta esta guÃ­a** para configuraciÃ³n paso a paso

## ğŸ“„ Licencia

Proyecto educativo - Uso libre para aprendizaje y desarrollo.

---

**ğŸ¯ Â¡Tu sistema estÃ¡ listo para monitorear el bienestar emocional de tu mascota las 24 horas!**
